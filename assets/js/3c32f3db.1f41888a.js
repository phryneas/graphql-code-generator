(self.webpackChunk_graphql_codegen_website=self.webpackChunk_graphql_codegen_website||[]).push([[4898],{35318:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return d}});var a=n(27378);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),d=r,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return n?a.createElement(g,o(o({ref:t},c),{},{components:n})):a.createElement(g,o({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},11165:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return p},toc:function(){return l},default:function(){return c}});var a=n(29603),r=n(50120),i=(n(27378),n(35318)),o={id:"from-0-18",title:"Migration to 1.0.0"},p={unversionedId:"migration/from-0-18",id:"migration/from-0-18",isDocsHomePage:!1,title:"Migration to 1.0.0",description:"March 20th, 2019",source:"@site/docs/migration/from-0-18.md",sourceDirName:"migration",slug:"/migration/from-0-18",permalink:"/docs/migration/from-0-18",editUrl:"https://github.com/dotansimha/graphql-code-generator/edit/master/website/docs/migration/from-0-18.md",version:"current",frontMatter:{id:"from-0-18",title:"Migration to 1.0.0"},sidebar:"sidebar",previous:{title:"Contributing",permalink:"/docs/custom-codegen/contributing"},next:{title:"Migration from 0.13 to 0.18",permalink:"/docs/migration/from-0-13"}},l=[{value:"What has changed?",id:"what-has-changed",children:[{value:"New TypeScript Libraries",id:"new-typescript-libraries",children:[]}]},{value:"How to migrate?",id:"how-to-migrate",children:[]},{value:"Breaking Changes &amp; Semver",id:"breaking-changes--semver",children:[]}],s={toc:l};function c(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"March 20th, 2019")),(0,i.kt)("h2",{id:"what-has-changed"},"What has changed?"),(0,i.kt)("p",null,"Our goals (and achievements) for 1.0.0 release was:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Rename all package from ",(0,i.kt)("inlineCode",{parentName:"li"},"graphql-codegen-...")," to scoped packages ",(0,i.kt)("inlineCode",{parentName:"li"},"@graphql-codegen/..."),"."),(0,i.kt)("li",{parentName:"ul"},"Stabilize the core package and the YML configuration file."),(0,i.kt)("li",{parentName:"ul"},"Remove the old, deprecated code from this repostory (everything related to ",(0,i.kt)("inlineCode",{parentName:"li"},"flattenDocuments")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"buildSchemaContext"),")."),(0,i.kt)("li",{parentName:"ul"},"Separate the CLI package from the core package, and create an easy-to-use and easy-to-consume core package."),(0,i.kt)("li",{parentName:"ul"},"Add better support for running the codegen in non-node environments, by clearing unused dependencies and add support for tree shaking."),(0,i.kt)("li",{parentName:"ul"},"Remove the dependency for Handlebars from this repository."),(0,i.kt)("li",{parentName:"ul"},"Introduce a new, easy-to-use common base for plugins, based on ",(0,i.kt)("inlineCode",{parentName:"li"},"Visitor")," pattern, that uses ",(0,i.kt)("inlineCode",{parentName:"li"},"visit")," from ",(0,i.kt)("inlineCode",{parentName:"li"},"graphql")," package."),(0,i.kt)("li",{parentName:"ul"},"Better unit tests for all plugins packages, by use TypeScript compiler to compile each test result- makes it much easier to detect mismatches and invalid output."),(0,i.kt)("li",{parentName:"ul"},"Refactor the entire TypeScript plugin, and create better and optimized output."),(0,i.kt)("li",{parentName:"ul"},"Fix most of the GitHub issues."),(0,i.kt)("li",{parentName:"ul"},"Update website and documentation for all plugins.")),(0,i.kt)("h3",{id:"new-typescript-libraries"},"New TypeScript Libraries"),(0,i.kt)("p",null,"During the refactor, we rewrote all TypeScript-related plugins. By doing that, we introducted some breaking changes."),(0,i.kt)("p",null,"Before those changes, you had to depend on ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-common")," plugin, and add ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-server")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-client")," (and others) on top of it."),(0,i.kt)("p",null,"Now, ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript")," plugin is the plugin you need to use for backend (it combines ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-common")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-server"),"), and use ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-operations")," on top of it for the client-side."),(0,i.kt)("p",null,"The reason for this change is the fact that now ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-operations")," uses ",(0,i.kt)("inlineCode",{parentName:"p"},"Pick<>")," to create the client-side types, instead of generating tons of ",(0,i.kt)("inlineCode",{parentName:"p"},"namepsace"),"s and ",(0,i.kt)("inlineCode",{parentName:"p"},"interface"),"s."),(0,i.kt)("h2",{id:"how-to-migrate"},"How to migrate?"),(0,i.kt)("p",null,"First, the new packages have a different name, that means that you need to manually update those packages names, and not just it's version."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"graphql-code-generator")," package is now ",(0,i.kt)("inlineCode",{parentName:"p"},"@graphql-codegen/cli")," and all other packages has been changes from ",(0,i.kt)("inlineCode",{parentName:"p"},"graphql-codegen-...")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"@graphql-codegen/..."),"."),(0,i.kt)("p",null,"So start by updating your ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),":"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Before:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "devDependencies": {\n    "graphql-code-generator": "0.18.0",\n    "graphql-codegen-typescript-common": "0.18.0",\n    "graphql-codegen-typescript": "0.18.0",\n    "graphql-codegen-typescript-documents": "0.18.0"\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"After:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "devDependencies": {\n    "@graphql-codegen/cli": "^1.0.0",\n    "@graphql-codegen/typescript": "^1.0.0",\n    "@graphql-codegen/typescript-operations": "^1.0.0"\n  }\n}\n')),(0,i.kt)("p",null,"Also, make sure to update your YML config file:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Before"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"./my-file.ts:\n  schema: schema.json\n  plugins:\n    - typescript-common\n    - typescript-server\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"After:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"./my-file.ts:\n  schema: schema.json\n  plugins:\n    - typescript\n")),(0,i.kt)("p",null,"And for client-side:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Before"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"./my-file.ts:\n  schema: schema.json\n  plugins:\n    - typescript-common\n    - typescript-client\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"After:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"./my-file.ts:\n  schema: schema.json\n  plugins:\n    - typescript\n    - typescript-operations\n")),(0,i.kt)("h2",{id:"breaking-changes--semver"},"Breaking Changes & Semver"),(0,i.kt)("p",null,"We tried to avoid breaking changes, but it's not always possible. We had a lot of issues we couldn't fix before because we didn't want to introduce breaking changes."),(0,i.kt)("p",null,"It was very hard for us to track breaking changes in the past, but it it's easier for us, and we promise to be semver-compatiable."),(0,i.kt)("p",null,"You can find a list of all breaking changes in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/dotansimha/graphql-code-generator/releases/"},"GitHub Releases page"),"."),(0,i.kt)("p",null,"We also created a new plugin, called ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-compatibility")," that generates backward compatibility for the ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-operations")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-react-apollo")," plugins.\nIt will generates for you types that are pointing to the new form of types. It supports ",(0,i.kt)("em",{parentName:"p"},"most")," of the use-cases."),(0,i.kt)("p",null,"To use it, start by installing from NPM:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn add -D @graphql-codegen/typescript-compatibility\n")),(0,i.kt)("p",null,"Then, add it to your codegen configuration:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"./my-file.ts:\n  schema: schema.json\n  plugins:\n    - typescript\n    - typescript-operations\n    - typescript-compatibility\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: If ",(0,i.kt)("inlineCode",{parentName:"p"},"typescript-react-apollo")," plugin also specified in your config file, it will generate backward-compatibily for it.")))}c.isMDXComponent=!0}}]);